<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https;">
  <title>Troph√©es ‚Äî TravelVLM</title>
  <link rel="stylesheet" href="style/style.css">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f6f8fb;color:#222}
    header{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:16px 20px;box-shadow:0 4px 15px rgba(0,0,0,0.2);position:sticky;top:0;z-index:100}
    .header-top{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:20px;flex-wrap:wrap}
    .header-top a{color:#fff;text-decoration:none;font-weight:bold;display:flex;align-items:center;gap:8px}
    .header-top nav{display:flex;gap:16px;align-items:center}
    .header-top nav a{font-weight:500;padding:6px 12px;border-radius:4px;transition:background 0.3s}
    .header-top nav a:hover{background:rgba(255,255,255,0.2)}
    #secretEgg{position:fixed;top:12px;right:12px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:20px;border-radius:50%;cursor:pointer;z-index:1200;opacity:0.06;transition:opacity .18s ease, transform .18s ease;user-select:none}
    #secretEgg:hover{opacity:0.95;transform:scale(1.08)}
    #secretEgg.revealed{opacity:0.95}
    #trophyBtn{position:fixed;top:12px;right:64px;z-index:1201;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:linear-gradient(135deg,#ffd700,#ff9800);box-shadow:0 6px 18px rgba(0,0,0,0.15);cursor:pointer;text-decoration:none;color:#333;opacity:0.9;font-size:18px}
    #trophyBtn:hover{transform:scale(1.06)}
    main{max-width:900px;margin:24px auto;padding:16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
    .trophy{background:#fff;padding:18px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.06);text-align:center}
    .locked{opacity:0.45;filter:grayscale(60%)}
    .badge{display:inline-block;padding:8px 12px;border-radius:999px;background:#ffebc6;margin-top:10px}
    a.back{display:inline-block;margin-top:18px;color:#667eea;text-decoration:none}
    footer{background:#333;color:#fff;text-align:center;padding:30px 20px;margin-top:40px}
    footer a{color:#667eea;text-decoration:none}
    footer a:hover{text-decoration:underline}
    #secretPhrase{cursor:pointer;transition:all 0.3s ease;user-select:none}
  </style>
</head>
<body>
  <!-- Easter egg -->
  <div id="secretEgg" role="button" aria-label="Oeuf secret">ü•ö</div>
  <a id="trophyBtn" href="trophe.html" title="Troph√©es">üèÜ</a>

  <!-- HEADER -->
  <header>
    <div class="header-top">
      <a href="index.html">‚úàÔ∏è TravelVLM</a>
      <nav>
        <a href="index.html">Accueil</a>
        <a href="rendezvous.html">Rendez-vous</a>
        <a href="trophe.html">Troph√©es</a>
        <a href="commentaire.html">Commentaires</a>
      </nav>
    </div>
  </header>

  <main>
    <section>
      <h1>Troph√©es ‚Äî TravelVLM</h1>
      <p style="opacity:.9;margin-top:6px">Vos r√©compenses d√©bloqu√©es sont stock√©es sur cet appareil.</p>
      <h2>Vos troph√©es</h2>
      <div class="grid" id="trophyGrid">
        <div class="trophy" data-id="egg_hatch">
          <div style="font-size:36px">ü•ö</div>
          <h3>Oeuf d√©couvert</h3>
          <div class="small">Vous avez trouv√© l'≈ìuf secret.</div>
          <div class="badge" id="badge_egg_hatch">Locked</div>
        </div>
        <div class="trophy" data-id="baby_dragon">
          <div style="font-size:36px">üê≤</div>
          <h3>B√©b√© dragon</h3>
          <div class="small">L'≈ìuf a √©clos en b√©b√© dragon.</div>
          <div class="badge" id="badge_baby_dragon">Locked</div>
        </div>
        <div class="trophy" data-id="dragon_master">
          <div style="font-size:36px">üêâ</div>
          <h3>Dragon ultime</h3>
          <div class="small">Vous avez fait grandir le dragon.</div>
          <div class="badge" id="badge_dragon_master">Locked</div>
        </div>

        <!-- 10 nouveaux troph√©es -->
        <div class="trophy" data-id="visitor">
          <div style="font-size:36px">üë£</div>
          <h3>Visiteur</h3>
          <div class="small">Vous avez visit√© le site.</div>
          <div class="badge" id="badge_visitor">Locked</div>
        </div>

        <div class="trophy" data-id="first_comment">
          <div style="font-size:36px">üí¨</div>
          <h3>Premier commentaire</h3>
          <div class="small">Vous avez publi√© votre premier commentaire.</div>
          <div class="badge" id="badge_first_comment">Locked</div>
        </div>

        <div class="trophy" data-id="first_booking">
          <div style="font-size:36px">üìÖ</div>
          <h3>Premier RDV</h3>
          <div class="small">Vous avez r√©serv√© votre premier rendez-vous.</div>
          <div class="badge" id="badge_first_booking">Locked</div>
        </div>

        <div class="trophy" data-id="five_comments">
          <div style="font-size:36px">üìù</div>
          <h3>5 Commentaires</h3>
          <div class="small">Vous avez publi√© 5 commentaires.</div>
          <div class="badge" id="badge_five_comments">Locked</div>
        </div>

        <div class="trophy" data-id="five_bookings">
          <div style="font-size:36px">üìÜ</div>
          <h3>5 RDV</h3>
          <div class="small">Vous avez pris 5 rendez-vous.</div>
          <div class="badge" id="badge_five_bookings">Locked</div>
        </div>

        <div class="trophy" data-id="ad_click">
          <div style="font-size:36px">üñ±Ô∏è</div>
          <h3>Clic Pub</h3>
          <div class="small">Vous avez cliqu√© sur une publicit√©.</div>
          <div class="badge" id="badge_ad_click">Locked</div>
        </div>

        <div class="trophy" data-id="share">
          <div style="font-size:36px">üîó</div>
          <h3>Partage</h3>
          <div class="small">Vous avez partag√© la page (local).</div>
          <div class="badge" id="badge_share">Locked</div>
        </div>

        <div class="trophy" data-id="vip_access">
          <div style="font-size:36px">üîê</div>
          <h3>VIP</h3>
          <div class="small">Acc√®s VIP obtenu.</div>
          <div class="badge" id="badge_vip_access">Locked</div>
        </div>

        <div class="trophy" data-id="boss_visit">
          <div style="font-size:36px">üëë</div>
          <h3>Boss</h3>
          <div class="small">Vous avez acc√©d√© au panneau BOSS.</div>
          <div class="badge" id="badge_boss_visit">Locked</div>
        </div>

        <div class="trophy" data-id="bug_hunter">
          <div style="font-size:36px">üîé</div>
          <h3>Chasseur de bugs</h3>
          <div class="small">Vous avez signal√© un bug (local).</div>
          <div class="badge" id="badge_bug_hunter">Locked</div>
        </div>
      </div>
      <a class="back" href="index.html">‚Üê Retour</a>
    </section>
  </main>

    <script>
    (function(){
      const eggKey = 'traveldream_easter_egg_v1';
      const eggState = parseInt(localStorage.getItem(eggKey) || '0', 10);

      function setUnlocked(id, unlocked){
        const el = document.getElementById('badge_' + id.replace(/\W/g,'_'));
        if(!el) return;
        if(unlocked){ el.textContent = 'D√©bloqu√©'; el.parentElement.classList.remove('locked'); } else { el.textContent = 'Locked'; el.parentElement.classList.add('locked'); }
      }

      // helper checks
      function hasComments(count){ try{ const raw = localStorage.getItem('traveldream_comments_v1'); if(!raw) return false; const list = JSON.parse(raw); return list.length >= (count||1); }catch(e){return false} }
      function hasBookings(count){ try{ const raw = localStorage.getItem('traveldream_appts_v1'); if(!raw) return false; const list = JSON.parse(raw); return list.length >= (count||1); }catch(e){return false} }
      function hasAdClicks(){ try{ for(const k in localStorage){ if(k.startsWith('traveldream_ad_clicks_') && parseInt(localStorage.getItem(k) || '0',10) > 0) return true; } }catch(e){} return false }

      // base trophies
      setUnlocked('egg_hatch', localStorage.getItem(eggKey) !== null);
      setUnlocked('baby_dragon', eggState >= 1);
      setUnlocked('dragon_master', eggState >= 2);

      // new trophies checks
      setUnlocked('visitor', localStorage.getItem('traveldream_visited') === '1');
      setUnlocked('first_comment', hasComments(1));
      setUnlocked('first_booking', hasBookings(1));
      setUnlocked('five_comments', hasComments(5));
      setUnlocked('five_bookings', hasBookings(5));
      setUnlocked('ad_click', hasAdClicks());
      setUnlocked('share', localStorage.getItem('traveldream_shared') === '1');
      setUnlocked('vip_access', sessionStorage.getItem('vipAccess') === 'true');
      setUnlocked('boss_visit', sessionStorage.getItem('bossAccess') === 'true');
      setUnlocked('bug_hunter', localStorage.getItem('traveldream_bug_reported') === '1');
    })();
  </script>

  <!-- Easter egg script -->
  <script>
    (function(){
      const EGG_KEY = 'traveldream_easter_egg_v1';
      const el = document.getElementById('secretEgg');
      if(!el) return;
      let state = parseInt(localStorage.getItem(EGG_KEY) || '0', 10);
      const labels = ['ü•ö','üê≤','üêâ'];
      function render(){ el.textContent = labels[state] || labels[0]; if(state>0) el.classList.add('revealed'); else el.classList.remove('revealed'); }
      function animatePop(){ el.style.transform='scale(1.25)'; setTimeout(()=>el.style.transform='scale(1)',160); }
      el.addEventListener('click', function(e){ e.preventDefault(); state = (state + 1) % labels.length; localStorage.setItem(EGG_KEY, String(state)); render(); animatePop(); });
      let pressTimer=null;
      el.addEventListener('pointerdown', ()=>{ pressTimer = setTimeout(()=>{ state=0; localStorage.setItem(EGG_KEY,'0'); render(); alert('Oeuf r√©initialis√©'); }, 1600); });
      el.addEventListener('pointerup', ()=>{ if(pressTimer){ clearTimeout(pressTimer); pressTimer=null } });
      render();
    })();
  </script>

  <!-- Cookie banner -->
  <style>
    #cookieBanner{position:fixed;left:20px;right:20px;bottom:18px;background:rgba(255,255,255,0.98);border-radius:12px;padding:14px 18px;box-shadow:0 12px 40px rgba(0,0,0,0.2);display:flex;gap:12px;align-items:center;z-index:2000}
    #cookieBanner p{margin:0;color:#333}
    #cookieBanner .actions{margin-left:auto;display:flex;gap:8px}
    @media(max-width:480px){#cookieBanner{flex-direction:column;align-items:stretch}}
  </style>
  <div id="cookieBanner" style="display:none" aria-live="polite">
    <div style="max-width:720px">
      <strong>TravelVLM utilise des cookies</strong>
      <p style="margin-top:6px;">Nous utilisons des cookies pour am√©liorer votre exp√©rience et afficher des publicit√©s. En continuant, vous acceptez notre utilisation des cookies.</p>
    </div>
    <div class="actions">
      <button id="cookieReject" class="btn" style="background:#fff;border:1px solid #ddd">Refuser</button>
      <button id="cookieAccept" class="btn btn-primary">Accepter</button>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      const key='traveldream_cookies_v1';
      const banner = document.getElementById('cookieBanner');
      function show(){ if(banner) banner.style.display='flex' }
      function hide(){ if(banner) banner.style.display='none' }
      const v = localStorage.getItem(key);
      if(!v){ show(); }
      const acceptBtn = document.getElementById('cookieAccept');
      const rejectBtn = document.getElementById('cookieReject');
      if(acceptBtn) acceptBtn.addEventListener('click', ()=>{ localStorage.setItem(key,'accepted'); hide(); });
      if(rejectBtn) rejectBtn.addEventListener('click', ()=>{ localStorage.setItem(key,'rejected'); hide(); });
      try{ localStorage.setItem('traveldream_visited','1'); }catch(e){}
    });
    function recordAdClick(e, id){
      try{ if(e && e.preventDefault) e.preventDefault(); }catch(err){}
      const key = 'traveldream_cookies_v1';
      const v = localStorage.getItem(key);
      const href = (e && e.currentTarget && e.currentTarget.href) ? e.currentTarget.href : (e && e.target && e.target.closest && e.target.closest('a') ? e.target.closest('a').href : null);
      const doNav = () => { if(href) window.location.href = href; return false; };
      if(v === 'accepted'){
        const ck = 'traveldream_ad_clicks_' + id;
        const n = parseInt(localStorage.getItem(ck) || '0', 10) + 1;
        localStorage.setItem(ck, String(n));
        return doNav();
      } else {
        const ok = confirm('TravelVLM utilise des cookies pour suivre les clics publicitaires. Acceptez-vous les cookies pour activer ce suivi ?');
        if(ok){
          localStorage.setItem(key, 'accepted');
          try{ document.getElementById('cookieBanner').style.display='none'; }catch(e){}
          const ck = 'traveldream_ad_clicks_' + id;
          const n = parseInt(localStorage.getItem(ck) || '0', 10) + 1;
          localStorage.setItem(ck, String(n));
          return doNav();
        } else {
          return doNav();
        }
      }
    }
  </script>

  <!-- FOOTER -->
  <footer>
    <div style="max-width:1200px;margin:0 auto">
      <div style="margin-bottom:20px">
        <a href="index.html">Accueil</a> |
        <a href="rendezvous.html">Rendez-vous</a> |
        <a href="commentaire.html">Commentaires</a> |
        <a href="trophe.html">Troph√©es</a>
      </div>
      <p>&copy; 2025 TravelVLM - L√† o√π vos r√™ves deviennent r√©alit√©</p>
      <p style="margin-top:15px;font-size:13px;color:#999" id="secretPhrase">
        G√©r√©e par une √©quipe de passionn√©s qui r√™vent de voyages, destin√©e √† tous ceux qui cherchent l'aventure, la d√©couverte et le confort.<span id="secretDot" style="cursor:pointer;font-weight:bold;color:#666;transition:all 0.3s ease;padding:0 2px">.</span>
      </p>
    </div>
  </footer>

  <script>
    // Triple-click on secret phrase to go to boss login
    const secretPhrase = document.getElementById('secretPhrase');
    let clickCount = 0;
    let lastClickTime = 0;
    secretPhrase.addEventListener('click', function(e) {
      e.preventDefault();
      const now = Date.now();
      if (now - lastClickTime > 2000) { clickCount = 0; }
      clickCount++;
      lastClickTime = now;
      secretPhrase.style.color = '#ff1493';
      secretPhrase.style.textShadow = '0 0 8px rgba(255, 20, 147, 0.8)';
      setTimeout(() => {
        if (clickCount < 3) { secretPhrase.style.color = '#777'; secretPhrase.style.textShadow = 'none'; }
      }, 200);
      if (clickCount === 3) {
        secretPhrase.style.color = '#00ff88';
        secretPhrase.style.textShadow = '0 0 12px rgba(0, 255, 136, 0.8)';
        setTimeout(() => { window.location.href = 'boss_login.html'; }, 300);
      }
    });
    secretPhrase.addEventListener('mouseenter', function() {
      if (clickCount > 0) { this.style.color = '#ff1493'; } else { this.style.color = '#999'; }
    });
    secretPhrase.addEventListener('mouseleave', function() {
      if (clickCount < 3) { this.style.color = '#777'; }
    });
  </script>
